syntax = "proto3";

package protos;

import "records/kafka.proto";
import "common/auth.proto";
import "common/status.proto";
import "encoding/options.proto";

option go_package = "github.com/batchcorp/plumber-schemas/build/go/protos";

message WriteRecord {
    oneof Records {
        records.Kafka kafka = 100;
    }
}

message WriteRequest {
    // Every gRPC request must have a valid auth config
    common.Auth auth = 9999;

    string connection_id = 1;

    // We need to use a WriteRecord as a wrapper since there is no way to "repeated oneof ..."
    repeated WriteRecord records = 2;

    encoding.Options decode_options = 3;
}

message WriteResponse {
    common.Status status = 1000;
}
