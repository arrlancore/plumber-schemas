// The encoding proto schema is intended to be used for either encoding or
// decoding. The intent of whether to encode or decode should be specified
// somewhere outside of this proto.

syntax = "proto3";

package protos.encoding;

option go_package = "github.com/batchcorp/plumber-schemas/build/go/protos/encoding";

enum Type {
    NONE = 0;
    JSON = 1;
    JSON_SCHEMA = 2;
    PROTOBUF = 3;
    AVRO = 4;
    THRIFT = 5;
    FLATBUFFER = 6;
}

message EncodeOptions {
    // The type of decoder selected determines which Encoding should be used (if any).
    // NOTE: This type will also determine which metadata k:v's need to be set.
    // @gotags: name:"encoder"
    Type type = 1;

    // Specify an existing stored schema to use instead of specifying a Encoding payload
    // @gotags: kong:"-"
    string schema_id = 2;

    // Valid input keys: dir, file, string, github, zip
    // TODO: Help needs to outline all of the available options here
    // @gotag: name:"decoder-input"
    map<string, string> input = 3;

    // Valid input keys:
    // TODO: Help needs to outline all of the available options here
    // @gotag: name:"decoder-metadata"
    map<string, string> metadata = 4;
}


message DecodeOptions {
    // The type of decoder selected determines which Encoding should be used (if any)
    // NOTE: This type will also determine which metadata k:v's need to be set.
    // @gotags: name:"decoder"
    Type type = 1;

    // Specify an existing stored schema to use instead of specifying a Encoding payload
    // @gotags: kong:"-"
    string schema_id = 2;

    // Valid input keys: dir, file, string, github, zip
    // TODO: Help needs to outline all of the available options here
    // @gotag: name:"decoder-input"
    map<string, string> input = 3;

    // Valid input keys:
    // TODO: Help needs to outline all of the available options here
    // @gotag: name:"decoder-metadata"
    map<string, string> metadata = 4;
}
